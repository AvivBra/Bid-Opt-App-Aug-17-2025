# כללי Portfolio - Flat Portfolios מוחרגים

## סקירה כללית

ישנם 10 פורטפוליוז מיוחדים שנקראים "Flat Portfolios" שתמיד מוחרגים מכל אופטימיזציה. פורטפוליוז אלו מנוהלים באופן ידני ואסור למערכת לשנות את ההצעות שלהם.

## רשימת 10 ה-Flat Portfolios

### הרשימה המלאה (Case Sensitive!)

1. **Flat 30**
2. **Flat 25**
3. **Flat 40**
4. **Flat 25 | Opt**
5. **Flat 30 | Opt**
6. **Flat 20**
7. **Flat 15**
8. **Flat 40 | Opt**
9. **Flat 20 | Opt**
10. **Flat 15 | Opt**

## כללי סינון

### מתי לסנן
- **תמיד** - בכל אופטימיזציה
- **לפני** כל עיבוד או חישוב
- **אחרי** קריאת הנתונים מהקובץ

### איך לסנן
1. חפש את עמודת "Portfolio Name (Informational only)" (עמודה 14)
2. השווה את הערך לרשימת ה-Flat Portfolios
3. הסר את כל השורות שנמצאו התאמה
4. **חשוב:** ההשוואה היא Case Sensitive (רגישה לאותיות גדולות/קטנות)

### דוגמה לסינון
```
קלט: 1,000 שורות
מתוכן: 150 שורות עם "Flat 30"
        50 שורות עם "Flat 25 | Opt"
פלט: 800 שורות לעיבוד
```

## טיפול במקרי קצה

### Portfolio דומה אבל לא זהה
- "flat 30" (אותיות קטנות) - **לא מוחרג**
- "Flat 30 " (רווח בסוף) - **לא מוחרג**
- "Flat30" (ללא רווח) - **לא מוחרג**
- "Flat 35" (מספר אחר) - **לא מוחרג**

### Portfolio חסר
אם Portfolio Name ריק או null - השורה **לא מוחרגת** (ממשיכה לעיבוד)

## למה זה חשוב

### סיבות עסקיות
- פורטפוליוז אלו מנוהלים לפי אסטרטגיה מיוחדת
- יש להם הסכמים ספציפיים עם הלקוחות
- שינוי אוטומטי עלול לפגוע בביצועים

### השלכות טכניות
- אי סינון עלול לגרום לעדכון שגוי של Bids
- הלקוח יצטרך לתקן ידנית את השינויים
- עלול לגרום לאובדן אמון במערכת

## וולידציה

### בדיקות נדרשות
1. **לפני עיבוד:** ספור כמה שורות נמחקו
2. **אחרי עיבוד:** וודא שאין Flat Portfolios בפלט
3. **לוג:** רשום כמה שורות סוננו מכל סוג

### הודעות למשתמש
- "Filtered X rows with Flat portfolios"
- "Processing Y rows after filtering"

## הרחבות עתידיות

### אפשרויות לעתיד (TBC)
- הוספת portfolios נוספים לרשימה
- יכולת להגדיר רשימה מותאמת אישית
- סינון לפי patterns (כל מה שמתחיל ב-"Flat")

## הערות חשובות

1. **אין יוצאים מהכלל** - תמיד לסנן את כל 10 הפורטפוליוז
2. **סדר לא משנה** - אפשר לסנן בכל סדר
3. **ביצועים** - הסינון צריך להיות מהיר (מתחת לשנייה)
4. **שקיפות** - תמיד לדווח למשתמש כמה שורות סוננו

---

**עדכון אחרון:** 18 באוגוסט 2025, 12:45